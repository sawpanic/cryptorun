# CryptoRun v3.2.1 Progress Tracking
# Weighted milestone completion for enforcing measurable progress

version: "3.2.1"
last_updated: "2025-09-07"
completion_note: "Provider & Data Source Expansion completed with derivatives, DeFi, and fallback providers while enforcing aggregator ban for microstructure data"

milestones:
  # Core Architecture (20% total weight - adjusted for provider expansion)
  unified_composite_scoring:
    weight: 12
    completed: true
    description: "Single scoring path with protected MomentumCore"
    completion_date: "2025-01-10"
    
  gram_schmidt_orthogonalization:
    weight: 8
    completed: true
    description: "Factor residualization with momentum protection"
    completion_date: "2025-01-10"

  # Data Pipeline (25% total weight - increased due to provider expansion)
  data_facade_hot_warm:
    weight: 8
    completed: true
    description: "TTL caches + deterministic fakes"
    completion_date: "2025-09-07"
    progress: 100
    
  exchange_native_microstructure:
    weight: 8
    completed: true
    description: "L1/L2 validation with proof generation"
    completion_date: "2025-01-12"
    
  provider_data_source_expansion:
    weight: 9
    completed: true
    description: "Derivatives, DeFi, fallback providers with aggregator ban enforcement"
    completion_date: "2025-09-07"
    progress: 100

  # Risk & Portfolio Management (20% total weight)
  regime_adaptive_weights:
    weight: 8
    completed: true
    description: "Three weight profiles with 4h switching"
    completion_date: "2025-01-10"
    
  portfolio_risk_controls:
    weight: 12
    completed: true
    description: "Correlation matrix, sector caps, beta budget, P&L tracking, VaR calculations"
    completion_date: "2025-09-07"
    progress: 100

  # Detection Systems (15% total weight)  
  premove_detector:
    weight: 10
    completed: false
    description: "Pre-movement detection with 2-of-3 gates"
    progress: 20
    
  premove_application_layer:
    weight: 5
    completed: false
    description: "Portfolio, alerts, execution, backtest shells"
    progress: 20

  # Quality & Testing (10% total weight)
  unit_test_coverage:
    weight: 5
    completed: true
    description: "Comprehensive unit test suite with load and regression testing"
    completion_date: "2025-09-07"
    progress: 100
    
  integration_tests:
    weight: 5
    completed: true
    description: "End-to-end integration testing, K6 load tests, performance monitoring"
    completion_date: "2025-09-07"
    progress: 100

  # User Interface (8% total weight - adjusted for deployment)
  menu_system_unified:
    weight: 4
    completed: true
    description: "Unified menu system with single pipeline calls"
    completion_date: "2025-01-12"
    
  real_time_dashboard:
    weight: 4
    completed: true
    description: "SSE-throttled live dashboard with Grafana monitoring and metrics"
    completion_date: "2025-09-07"

  # Deployment & Security (12% total weight - new category)
  persistence_layer:
    weight: 6
    completed: true
    description: "PostgreSQL/TimescaleDB with repository interfaces and migrations"
    completion_date: "2025-09-07"
    progress: 100
    
  deployment_infrastructure:
    weight: 3
    completed: true
    description: "Docker, Kubernetes manifests, docker-compose for development"
    completion_date: "2025-09-07"
    progress: 100
    
  security_framework:
    weight: 3
    completed: true
    description: "Secret management, CI security scanning, vulnerability assessment"
    completion_date: "2025-09-07"
    progress: 100

# Calculation rules
calculation:
  # Weight must sum to 100
  total_weight_check: true
  
  # Completed milestones get full weight
  completed_weight_multiplier: 1.0
  
  # Partial progress gets proportional weight
  partial_progress_formula: "weight * (progress / 100)"
  
  # Minimum progress increment to pass CI
  min_progress_increment: 0.1

# Metadata
tracking:
  baseline_commit: "main"
  progress_file: ".progress"
  enforce_in_ci: true
  enforce_in_pre_push: true